{%- macro print_scalar(printable) -%}
{{ printable.value }}
{%- endmacro -%}

{%- macro print_scalar_array(printable) -%}
    {% if printable.value == None %}{{ print_null() }}{% else %}
List.of {% if not printable.value %}(){% else %}
(
        {% for i in printable.value %}
    {{ i }}{% if not loop.last %},{% endif %}

        {% endfor %}
)
    {%- endif %}{%- endif %}
{%- endmacro -%}

{%- macro print_file(printable) -%}
    {% if printable.value == None %}{{ print_null() }}{% else %}
new File("{{ printable.value }}")
    {%- endif %}
{%- endmacro -%}

{%- macro print_file_array(printable) -%}
    {% if printable.value == None %}{{ print_null() }}{% else %}
List.of {% if not printable.value %}(){% else %}
(
    {% for i in printable.value %}
    new File("{{ i }}"){% if not loop.last %},{% endif %}

    {% endfor %}
)
    {%- endif %}{%- endif %}
{%- endmacro -%}

{%- macro print_free_form(printable) -%}
    {% if printable.value == None %}{{ print_null() }}{% else %}
Map.of {% if not printable.value %}(){% else %}
(
        {% for k, v in printable.value.items() %}
    "{{ k }}", {{ v }}{% if not loop.last %},{% endif %}

        {% endfor %}
)
    {%- endif %}{%- endif %}
{%- endmacro -%}

{%- macro print_free_form_array(printable) -%}
    {% if printable.value == None %}{{ print_null() }}{% else %}
List.of {% if not printable.value %}(){% else %}
(
        {% for obj in printable.value %}
    Map.of {% if not obj.value %}(){% if not loop.last %},{% endif %}{% else %}(
            {% for k, v in obj.items() %}
        "{{ k }}": {{ v }},
            {% endfor %}
    ){% if not loop.last %},{% endif %}{% endif %}

        {% endfor %}
)
    {%- endif %}{%- endif %}
{%- endmacro -%}

{%- macro print_object(printable) -%}
{{ printable.value|print_variablename }}
{%- endmacro -%}

{%- macro print_object_array(printable) -%}
    {% if printable.value == None %}{{ print_null() }}{% else %}
new ArrayList<{{ printable.target_type|print_classname }}>(List.of {% if not printable.value %}()){% else %}
(
        {% for i in printable.value %}
    {{ i|print_variablename }}{% if not loop.last %},{% endif %}

        {% endfor %}
))
    {%- endif %}{%- endif %}
{%- endmacro -%}

{%- macro print_security(printable) -%}
    {% set comment = "" %}
    {% if not printable.is_primary %}{% set comment = "// " %}{% endif %}
{{ comment }}config.{{ ("set" ~ "_" ~ printable.method)|print_methodname }}("{{ printable.value }}");
{%-endmacro -%}

{%- import "_macros.jinja2" as m with context -%}

package {{ config.oseg_package }};

import {{ config.invoker_package }}.ApiException;
import {{ config.invoker_package }}.Configuration;
import {{ config.api_package }}.*;
import {{ config.invoker_package }}.auth.*;
import {{ config.model_package }}.*;

import java.io.File;
import java.time.LocalDate;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

public class {{ (operation.operation_id ~ "_" ~ example_name)|print_classname }}
{
    public static void main(String[] args)
    {
        var config = Configuration.getDefaultApiClient();
        {% if operation.security.is_optional %}
        // Authentication is optional for this API endpoint
        {% endif %}
{% call(security_schemes) m.parse_security_macro(operation, 8) %}
    {% for _, security in security_schemes.items() %}
        {{ security }}
    {% endfor %}
{% endcall %}

{% call(objects) m.parse_objects_macro(property_container) %}
    {% for obj_name, obj in objects.items() %}
        {% if not obj.is_array %}
            {% call(properties) m.parse_object_properties_macro(property_container, obj, 8) %}
        var {{ obj_name|print_variablename }} = new {{ obj.type|print_classname }}();
                {% for name, value in properties.items() %}
        {{ obj_name|print_variablename }}.{{ name|print_methodname }}({{ value }});
                {% endfor %}
            {% endcall %}
        {% else %}
        var {{ obj_name|print_variablename }} = {{ "" }}
            {%- call(value) m.parse_object_list_properties_macro(obj, 8) %}
            {{- value }};
            {% endcall %}
        {% endif %}

    {% endfor %}
{% endcall %}
        try
        {
            {{ "" -}}
{% call(properties) m.parse_api_call_properties_macro(property_container, 16) %}
            {% if operation.response and operation.response.body  %}var response = {% endif -%}
            new {{ (operation.api_name ~ "Api")|print_classname }}(config).{{ operation.operation_id|print_methodname }}({%- if not properties %});
{% else %}

    {% for name, value in properties.items() %}
                {{ value }}{% if not loop.last %},{% endif %}

    {% endfor %}
            );
{% endif %}
{% endcall %}
    {% if operation.response and operation.response.body and not operation.response.is_binary %}

            System.out.println(response);
    {% elif operation.response and operation.response.is_binary %}
            response.renameTo(new File("./file_response"));
    {% endif %}
        } catch (ApiException e) {
            System.err.println("Exception when calling {{ operation.api_name|print_classname }}#{{ operation.operation_id|print_methodname }}");
            System.err.println("Status code: " + e.getCode());
            System.err.println("Reason: " + e.getResponseBody());
            System.err.println("Response headers: " + e.getResponseHeaders());
            e.printStackTrace();
        }
    }
}
{{ "" }}
